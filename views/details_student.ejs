<%- include('partials/header'); -%>
<form id="create">
    <label for="name">Name:</label>
    <input type="text"  id="name" name="name" required>
    
    <label for="dob">Date of Birth:</label>
    <input type="date"  id="dob" name="dob" required>
    
    <label for="highest_qualification">Highest Qualification:</label>
    <input type="text" id="highest_qualification" name="highest_qualification" required>
    
    <label for="address">address:</label>
    <input type="text" id="address" name="address" required>

    <label for="phone_number">Phone Number:</label>
    <input type="text" id="phone_number" name="phone_number" required>

    <label for="email">Email id:</label>
    <input type="email" id="email" name="email" required>

    <label for="cv_link">CV(google_drive link):</label>
    <input type="text" id="cv_link" name="cv_link" required>

    <button>submit</button>
</form>

<script>
    const form = document.querySelector('form');
    form.addEventListener('submit',async (e)=>{
        e.preventDefault();
        const name = form.name.value;
        const dob = form.dob.value;
        const highest_qualification = form.highest_qualification.value;
        const address = form.address.value;
        const phone_number = form.phone_number.value;
        const email = form.email.value;
        const cv_link = form.cv_link.value;
        console.log({name, dob, highest_qualification, address, phone_number, email,cv_link});
        try
        {
            const res = await fetch('/details',{
                method:"POST",
                body: JSON.stringify({name, dob, highest_qualification, address, phone_number, email,cv_link}),
                headers:{'Content-Type':'application/json'}
            });
            const data = await res.json();
            console.log(data);
            if(data.profile)
            {
                location.assign('/');
            }
        }
        catch(err)
        {
            console.log(err);
        }
        
    })
</script>
<%- include('partials/footer'); -%>